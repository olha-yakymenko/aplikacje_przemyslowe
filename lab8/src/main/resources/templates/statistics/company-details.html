<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Statystyki Firmy - System Zarządzania Pracownikami</title>
<!--    <link rel="stylesheet" th:href="@{/css/style.css}">-->
</head>
<body>
<div layout:fragment="content">

        <section class="content-section">
            <div class="section-header">
                <h1 class="section-title" th:text="'Statystyki - ' + ${companyName}">Statystyki Firmy</h1>
                <a th:href="@{/statistics}" class="btn btn-secondary">Powrót do Statystyk</a>
            </div>

            <!-- Statystyki firmy -->
            <div class="stats-section">
                <h2>Podsumowanie Firmy</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" th:text="${stats.employeeCount}">0</div>
                        <div class="stat-label">Liczba Pracowników</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" th:text="'$' + ${#numbers.formatDecimal(stats.averageSalary, 1, 2)}">$0</div>
                        <div class="stat-label">Średnie Wynagrodzenie</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" th:text="${stats.getTopEarnerName}">-</div>
                        <div class="stat-label">Najlepiej Zarabiający</div>
                    </div>
                </div>
            </div>

            <!-- Lista pracowników firmy -->
            <div class="stats-section" style="margin-top: 3rem;">
                <h2>Pracownicy Firmy</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Imię i Nazwisko</th>
                                <th>Email</th>
                                <th>Stanowisko</th>
                                <th>Wynagrodzenie</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="employee : ${employees}">
                                <td th:text="${employee.name}">Jan Kowalski</td>
                                <td th:text="${employee.email}">jan@example.com</td>
                                <td th:text="${employee.position}">DEVELOPER</td>
                                <td th:text="'$' + ${#numbers.formatDecimal(employee.salary, 1, 2)}">$5000.00</td>
                                <td th:text="${employee.status}">ACTIVE</td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(employees)}">
                                <td colspan="5" style="text-align: center; padding: 2rem;">
                                    Brak pracowników w tej firmie
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Dodatkowe informacje -->
            <div class="stats-section" style="margin-top: 3rem;">
                <h2>Analiza Finansowa</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" th:text="'$' + ${#numbers.formatDecimal(stats.averageSalary * stats.employeeCount, 1, 2)}">$0</div>
                        <div class="stat-label">Miesięczny Koszt Płac</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" th:text="'$' + ${#numbers.formatDecimal(stats.averageSalary * stats.employeeCount * 12, 1, 2)}">$0</div>
                        <div class="stat-label">Roczny Koszt Płac</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" th:text="'$' + ${#numbers.formatDecimal(stats.averageSalary * 1.3, 1, 2)}">$0</div>
                        <div class="stat-label">Średni Koszt (+30%)</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <style>
        .stats-section {
            margin-bottom: 2rem;
        }
        .stats-section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
    </style>
</body>
</html>